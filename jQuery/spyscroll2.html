<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <style type="text/css">
    html,body{height:100%;}
        *{margin:0; padding:0;}
        ul{list-style:none;}
        .nav{height:40px; background-color: #000; text-align:center; width:100%; position:fixed;}
        .nav li {display:inline-block;}
        .nav li.on a{color:#F00;}
        .nav a{color:#FFF; text-decoration:none; line-height:40px; font-size:20px;}
        .section,.section>div {height:100%; -webkit-background-size: cover ;
        background-size: cover ; background-position: 50%;}
        .section>div:nth-child(1){background-image:url('../images/arbre_a.jpg');}
        .section>div:nth-child(2){background-image:url('../images/arbre_b.jpg')}
        .section>div:nth-child(3){background-image:url('../images/arbre_c.jpg')}
        .section>div:nth-child(4){background-image:url('../images/arbre_f.jpg');}
    </style>
    
    <script>
        
        $(function(){
            
            var spot = []
            var aa = []//2.의 배열
                $('.section>div').each(function(){
                    
                    spot.push($(this).offset().top)
                    aa.push($(this).offset().top + $(this).height())
                    // 2. 에 이용한 배열
                })
                
                
                
                $(window).scroll(function(){
                    var sct = $(this).scrollTop();
                    
                    $('.section>div').each(function(i){
                        
                       
                        
                        if(sct >= spot[i] && sct < aa[i]){
                            $('.nav li').eq(i).addClass('on');
                        }else {
                            console.log(i)
                            $('.nav li').eq(i).removeClass('on');
                        }
                        //1. body에 div를 하나 더만들다.
                        //2. 배열을 하나 더 만든다.
                        
                        // 미래
                        // if(sct >= spot[i]){
                        //     $('.nav li').eq(i).addClass('on').siblings().removeClass('on');
                        // }
                        //리소스를 많이 먹는다. 성능상 cpu문제가 생긴다.
                    })
                })
            
            
            
            
            
            
            
            
           $('.nav a').click(function(){
               
               
                var idx = $(this).parent().index();
                 $('body,html').animate({
                        scrollTop:spot[idx]
                    })
                    
                   return false;  
                    

           })
           
        })
        
        
    </script>
    
</head>
<body>
    
    <div class="nav">
        <ul>
            <li class="on"><a href="#page1">text</a></li>
            <li><a href="#page2">text</a></li>
            <li><a href="#page3">text</a></li>
            <li><a href="#page4">text</a></li>
        </ul>
    </div>
    <div class="section">
        <div id="page1"></div>
        <div id="page2"></div>
        <div id="page3"></div>
        <div id="page4"></div>
        
    </div>
    
</body>
</html>